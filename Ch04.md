# 04. 아키텍처


# 4.1 MySQL 엔진 아키텍쳐

## MySQL 서버 구조
- MySQL 독특한 구조
  - 보통은 모놀리식 같은 느낌
  - MySQL 은 plugin 형태 (MSA 같은 느낌?) 으로 잘 나뉘어짐
    - 장점
      - 유지보수 좋음
    - 단점
      - 예상과 다른 동작을 할 수 있는 복잡함

- MySQL 엔진
  - SQL 인터페이스
  - SQL 파서
  - SQL 옵티마이저
  - 캐시 & 버퍼

- 스토리지 엔진
  - InnoDB
  - MyISAM
  - Memory

  - 성능 향상을 위해서 키 캐시(MyISAM) 버퍼풀 (InnoDB)

## 핸들러 API
- `SHOW GLOBAL STATUS LIKE 'Handler%'`;

- MySQL 엔진과 스토리지 엔진 사이에 주고받는 API

## MySQL 스레딩 구조




## 4.1 MySQL 엔진 아키텍처

### 4.1.1 MySQL 전체 구조

### 4.1.2 MySQL 스레딩 구조

### 4.1.3 메모리 할당 및 사용 구조

### 4.1.4 플러그인 스토리지 엔진 모델

### 4.1.5 컴포넌트

### 4.1.6 쿼리 실행 구조

### 4.1.7 복제

### 4.1.8 쿼리 캐시

### 4.1.9 스레드 풀

### 4.1.10 트랜잭션 지원 메타 데이터

## 4.2 InnoDB 스토리지 엔진 아키텍처

### 4.2.1 프라이머리 키에 의한 클러스터링

### 4.2.2 외래 키 지원

### 4.2.3 MVCC(Multi Version Concurrency Control)

### 4.2.4 잠금 없는 일관된 읽기(Non-Locking Consistent Read)

### 4.2.5 자동 데드락 감지

### 4.2.6 자동화된 장애 복구

### 4.2.7 InnoDB 버퍼 풀

### 4.2.8 Double Write Buffer

### 4.2.9 언두 로그

### 4.2.10 체인지 버퍼

### 4.2.11 리두 로그 및 로그 버퍼

### 4.2.12 어댑티브 해시 인덱스

### 4.2.13 InnoDB 와 MyISAM, MEMORY 스토리지 엔진 비교

## 4.3 MyISAM 스토리지 엔진 아키텍처

### 4.3.1 키 캐시

### 4.3.2 운영체제의 캐시 및 버퍼

### 4.3.3 데이터 파일과 프라이머리 키(인덱스) 구조

## 4.4 MySQL 로그 파일

### 4.4.1 에러 로그 파일

### 4.4.2 제너럴 쿼리 로그 파일(제너럴 로그 파일, General log)

### 4.4.3 슬로우 쿼리 로그
